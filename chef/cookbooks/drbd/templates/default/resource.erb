# Generated by Chef for <%= node[:fqdn] %>

resource <%= @resource %> {
  device    <%= @device %>;
  disk      <%= @disk %>;
  meta-disk internal;
  on <%= @local_hostname %> {
    node-id   <%= @local_node_id %>;
    address   <%= @local_ip %>:<%= @port %>;
  }
  on <%= @remote_hostname %> {
    node-id   <%= @remote_node_id %>;
    address   <%= @remote_ip %>:<%= @port %>;
  }
  connection {
    host <%= @local_hostname %>  port <%= @port %>;
    host <%= @remote_hostname %> port <%= @port %>;
    net {
      protocol C;
    }
  }
  net {
    after-sb-0pri discard-zero-changes;
    after-sb-1pri discard-secondary;
    after-sb-2pri disconnect;
  }
}
